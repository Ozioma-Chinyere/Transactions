# ğŸš€ Retail Sales / Eâ€‘Commerce Strategic Analysis (PostgreSQL)

## ğŸ§  Project Overview

This repository showcases an **endâ€‘toâ€‘end analytics engineering pipeline** and strategic analysis built on **2.2M+ eâ€‘commerce transactions** using PostgreSQL. The project demonstrates how raw, imperfect transactional data can be transformed into **decisionâ€‘grade business insights** using modern SQL, data modeling, and analytical frameworks. 

The work follows an **Analytics Engineering** approach:

* Separation of **data transformation** from **business logic**
* Preservation and recovery of revenueâ€‘critical data
* Advanced SQL for stakeholderâ€‘ready metrics

The analysis culminates in a **Unified Strategy Portfolio** that classifies brands and categories into strategic roles (Stars, Cash Cows, Efficiency Plays) using a custom **Efficiency Index**.


ğŸ“˜ **Full Technical & Business Case Study** >
For a detailed walkthrough of the SQL refactoring process, the logic behind the "Efficiency Index," and the step-by-step data recovery of $14.5M in unlabelled revenue, please refer to the â¡ï¸ [Case Study â€“ Retail Eâ€‘Commerce Analytics Engineering](./CASE_STUDY.md)

---

## ğŸ“Š Dataset

Transaction data stored in `transactions_tb` with:
`user_id`, `event_time`, `order_id`, `product_id`, `category_id`, `category_code`, `brand`, `price`

---

## ğŸ”„ Before & After: At a Glance
Below is a summary of the architectural improvements made in the advanced phase. For the full technical comparison table and query logic, see Section 2 of the Case Study.

| Aspect              | Initial EDA                    | Advanced Analytics Engineering                     |
| ------------------- | ------------------------------ | -------------------------------------------------- |
| Data Integrity      | Dropped nulls, large data loss | Imputation & labeling; **100% revenue preserved**  |
| Feature Engineering | Basic timestamps               | Normalized time, surrogate keys, user segmentation |
| SQL Techniques      | GROUP BY                       | CTEs, Window Functions, selfâ€‘joins                 |
| Business Value      | Descriptive metrics            | Strategic segmentation & efficiency modeling       |

---

## ğŸ› ï¸ Key Achievements: Data Engineering & Cleaning Logic

* **Categorical Imputation:**
  Recovered missing `brand` and `category_code` using using Product ID anchors like `category_id` and `product_id`, unlocking **$14.5M in previously hidden revenue**.

* **Temporal Normalization:**
  Applied UTCâ€‘aligned +8h correction to ensure peakâ€‘hour and seasonality analyses reflect real business behavior.

* **User Segmentation:**
  Classified **74% null `user_id`s** as anonymous users, preserving the dataset while enabling Guest vs. Registered analysis.

* **Anomaly Detection and Mitigation:**
  Isolated Unixâ€‘epoch timestamp corruption (1970) to prevent distortion of growth and seasonality trends.

---

## ğŸ§­ Strategic Framework

### ğŸ§® Efficiency Index (EI)

A custom metric to evaluate **value efficiency**, not just volume:

$$Efficiency Index = \frac{\text{Revenue Share \%}}{\text{Volume Share \%}}$$

* **EI > 1.0** â†’ Highâ€‘yield segments (revenueâ€‘efficient)
* **EI < 1.0** â†’ Traffic drivers (volumeâ€‘led)

### ğŸ“ˆ Unified Strategy Portfolio

```mermaid
quadrantChart
    title Unified Strategy Portfolio: Brand Positioning
    x-axis Low Transaction Volume --> High Transaction Volume
    y-axis Low Revenue Contribution --> High Revenue Contribution
    quadrant-1 STAR (High Value & Efficient)
    quadrant-2 EFFICIENCY PLAY (High Revenue/Low Vol)
    quadrant-3 LONG TAIL (Opportunity)
    quadrant-4 CASH COW (Traffic Drivers)
    "Samsung": [0.85, 0.90]
    "Apple": [0.35, 0.95]
    "Xiaomi": [0.90, 0.30]
    "Huawei": [0.45, 0.55]
    "Asus": [0.25, 0.60]
    "Beko": [0.65, 0.20]
```

---

## ğŸ’¡ Key Business Insights

* **Membership Value Gap:** Registered users show **27% higher AOV** on premium brands (e.g. Apple).
* **Morning Premium Window:** 05:00â€“08:00 delivers the highest Efficiency Index despite lower volume.
* **Market Dominance:** Samsung drives **26.5% of total revenue** with consistently high efficiency.

---

## ğŸ“ Repository Structure

```
01_input_data/              # Raw CSV files
02_initial_EDA/             # Baseline exploration (transaction_analysis.sql)
03_advanced_Analysis/       # Advanced analytics layer
  â”œâ”€ transactions_data_cleaning.sql  # Transformation & imputation logic
  â”œâ”€ transactions.sql                # Strategic analytics engine
04_data_output_csvs/        # 10 Cleaned datasets ready for BI/Dash-boarding
README.md                   
CASE_STUDY.md               # Technical Deep-Dive
```

---

## ğŸ”§ Tech Stack

* **Database:** PostgreSQL 15+
* **SQL:** CTEs, Window Functions, selfâ€‘joins, analytical views
* **Modeling:** Analytics engineering principles
* **Outputs:** CSVs ready for dash-boarding

---
## ğŸ Conclusion & Recommendations
*   Incentivize Registration: Implement "Member-Only" discounts on Stars (Smartphones/Notebooks) to bridge the AOV gap.
*   Operational Timing: Focus premium product launches during the Morning Premium Window (05:00-08:00).
*   Data Governance: Implement NOT NULL constraints on brand and category_id at the application level to reduce the 12% "Hidden Revenue" in future cycles.

---

## âš™ï¸ How to Reproduce

1. Run DDL & load data via `transactions_data_cleaning.sql`
2. Build analytical view `transactions_vw`
3. Execute `transactions.sql` to generate strategy outputs

---

